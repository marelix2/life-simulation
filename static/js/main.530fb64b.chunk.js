(this["webpackJsonplife-simulation"]=this["webpackJsonplife-simulation"]||[]).push([[0],{52:function(e,a,t){e.exports=t(62)},62:function(e,a,t){"use strict";t.r(a);var n,r,i=t(0),o=t.n(i),c=t(8),u=t.n(c),l=t(18),s=t(102),d=t(104),m=t(105),g=t(101),f=t(28),h=t(97),v=t(106),p=function(e){var a=e.label,t=Object(f.a)(e,["label"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(h.a,{variant:"overline"},a),o.a.createElement(v.a,t))},b=t(103),y=Object(g.a)((function(e){return{wrapper:{"& .MuiTextField-root, .MuiSlider-root, .MuiTypography-root":{margin:e.spacing(1),width:"96%"},background:"#c1c1c1"},controlButtons:{"& .MuiButtonBase-root":{width:"96%"},"& .MuiGrid-item":{width:200},width:"100%",marginBottom:e.spacing(1)},divider:{margin:e.spacing(2)}}})),w=function(e){var a=e.started,t=e.creatureFields,n=e.rangeFields,r=e.energyFields,i=e.handleStart,c=e.handleStop,u=e.handleReset,l=y();return o.a.createElement(s.a,{container:!0,direction:"column",justify:"center",className:l.wrapper},t.map((function(e){return o.a.createElement(s.a,{item:!0,key:e.id},o.a.createElement(d.a,Object.assign({type:"number",required:!0,disabled:a},e)))})),o.a.createElement(b.a,{className:l.divider}),r.map((function(e){return o.a.createElement(s.a,{item:!0,key:e.id},o.a.createElement(d.a,Object.assign({type:"number",required:!0,disabled:a},e)))})),o.a.createElement(b.a,{className:l.divider}),n.map((function(e){return o.a.createElement(s.a,{item:!0,key:e.id},o.a.createElement(p,Object.assign({},e,{disabled:a})))})),o.a.createElement(s.a,{container:!0,alignItems:"center",justify:"space-around",className:l.controlButtons},a?o.a.createElement(o.a.Fragment,null,o.a.createElement(s.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",onClick:function(){return u(window)}}," RESET")),o.a.createElement(s.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",onClick:c}," STOP"))):o.a.createElement(s.a,{item:!0},o.a.createElement(m.a,{variant:"contained",color:"primary",onClick:i}," START"))))},E=100,S=80,j=120,M=300,O=5e4,z=50,C=50,Y=200,X=100,F=50,k=1,x=100,I=5,A=3,N=5,B=.1,R=.7,T=.01,L=.01,q="random",J=.01,P=t(24),W=function(e){return{weights:e,stimulate:function(a){for(var t=a.length,n=e[0],r=0;r<t;r++)n+=e[r+1]*a[r];return n>N?1:0}}},G=function e(){for(var a=new Array(I),t=0;t<I;t++){for(var n=new Array(A+1),r=0;r<A+1;r++)n[r]=0;a[t]=W(n)}return{neurons:a,decide:function(e){for(var t,n,r=[],i=0;i<I;i++)1===a[i].stimulate(e[i])&&r.push(i);return 0===r.length?5:r[(t=0,n=r.length,Math.floor(Math.random()*(n-t+1))+t)]},randomize:function(){for(var e=0;e<I;e++)for(var t=0;t<A+1;t++)a[e].weights[t]=100*(Math.random()-.5)},cloneWithMutation:function(){for(var t=e(),n=0;n<I;n++)for(var r=0;r<A+1;r++){var i=a[n].weights[r];Math.random()<T&&(Math.random()>.5?i*=1+B:i*=1-B),t.neurons[n].weights[r]=i}return t},cross:function(t){for(var n=e(),r=0;r<I;r++)for(var i=0;i<A+1;i++){var o=.66*a[r].weights[i]+.34*t.neurons[r].weights[i];Math.random()>T&&(Math.random()>.5?o*=1+B:o*=1-B),Math.random()>L&&(Math.random()>.5?o*=1+R:o*=1-R),n.neurons[r].weights[i]=o}return n}}},D=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},H=function(e,a,t){return Math.sqrt(Math.pow(e.X-a.X,2)+Math.pow(e.Y-a.Y,2))/t},K=function e(a){var t=a.locationCoordinateX,n=a.locationCoordinateY,r=a.mapSize,i=a.creaturesStartingEnergy,o=t,c=n,u=i,l=G(),s=function(){return u/(3*i)};return{energy:u,age:0,X:o,Y:c,nn:l,clone:function(){var a=o+D(0,2)-1,t=c+D(0,2)-1;a<0&&(a=0),a>=r&&(a=r-1),t<0&&(t=0),t>=r.Y&&(t=r-1);var n=e({locationCoordinateX:a,locationCoordinateY:t,mapSize:r,creaturesStartingEnergy:i});return n.nn=l.cloneWithMutation(),n.energy=i,u-=i,n},breed:function(a){var t=Math.floor((o+a.X)/2),n=Math.floor((c+a.Y)/2),s=e({locationCoordinateX:t,locationCoordinateY:n,mapSize:r,creaturesStartingEnergy:i});return s.nn=l.cross(a.nn),s.energy=i,u-=i,s},react:function(e,a){for(var t=new Array(I),n=0;n<I;n++)t[n]=new Array(A),t[n][0]=s(),t[n][1]=e,t[n][2]=a;var d=l.decide(t);return 0===d&&u<i?(u-=1,5):(4===d&&o<r-1&&(o+=1),3===d&&o>0&&(o-=1),1===d&&c<r-1&&(c+=1),2===d&&c>0&&(c-=1),{decision:d,X:o,Y:c})},draw:function(e){e.fillStyle="#FF0000";var a=o*e.canvas.width/r,t=c*e.canvas.height/r,n=e.canvas.width/r,i=e.canvas.height/r;e.fillRect(a,t,n,i)},normalizeEnergy:s,randomizeLocation:function(){o=D(0,r),c=D(0,r)}}},Q=function(e){var a=e.creatures,t=e.plants,n=e.mapSize,r=e.id,i=e.creaturesLifespan,o=Math.sqrt(Math.pow(n,2)+Math.pow(n,2)),c=function(e){for(var a=e.creatures,t=e.plants,n=e.id,r=e.diagonal,i=-1,o=999999,c=0;c<t.length;c++)H(t[c],a[n],r)<o&&(o=H(t[c],a[n],r),i=c);return i}({id:r,creatures:a,plants:t,diagonal:o});if(-1!==c){var u=a[r].react(function(e,a,t){return(a.Y-e.Y)/H(e,a,t)/t}(a[r],t[c],o),function(e,a,t){return(a.X-e.X)/H(e,a,t)/t}(a[r],t[c],o)),l=H(a[r],t[c],o);a[r].X=u.X,a[r].Y=u.Y,0===u&&(Math.random()<.5?a.push(a[r].clone()):a.length>1&&a.push(a[r].breed(a[function(e){for(var a=e.creatures,t=e.id,n=e.diagonal,r=-1,i=999999,o=0;o<a.length;o++)o!==t&&H(a[o],a[t],n)<i&&(i=H(a[o],a[t],n),r=o);return r}({creatures:a,id:r,diagonal:o})]))),l<J&&(a[r].energy+=t[c].energy,t.splice(c,1))}return a[r].energy-=1,a[r].age+=1,(a[r].energy<=0||a[r].age>i)&&a.splice(r,1),{newCreatures:a,newPlants:t}},U=function(e,a){return Math.floor(Math.random()*(a-e+1))+e},V=function(e){var a=e.X,t=e.Y,n=e.energy,r=e.mapSize;return{X:a,Y:t,energy:n,draw:function(e){e.fillStyle="#00FF00",e.globalAlpha=.6;var n=a*(e.canvas.width-4)/r,i=t*(e.canvas.height-4)/r,o=(e.canvas.width-4)/r,c=(e.canvas.height-4)/r;e.fillRect(n+o/2,i+c/2,o,c)}}},Z=function(e){var a=e.worldMaxEnergy,t=e.creatures,n=e.plants,r=e.plantsEnergy,i=e.mapSize,o=Math.floor((a-function(){for(var e=0,a=0;a<t.length;a++)e+=t[a].energy;return e}()-function(){for(var e=n.length,a=0,t=0;t<e;t++)a+=n[t].energy;return a}())/r);if(o<1)return 0;if("random"===q)for(var c=0;c<o;c++)n.push(V({X:U(0,i-1),Y:U(0,i-1),energy:r,mapSize:i}));return n},$=[],_=[],ee=function(e){for(var a=$.length-1;a>=0;a--)Q(Object(P.a)({id:a,creatures:$,plants:_},e));ae(),0===$.length&&clearInterval(n),$=function(e){var a=e.creatures,t=e.creaturesMinCount,n=e.mapSize,r=e.creaturesStartingEnergy,i=t-a.length;if(i>0)for(var o=0;o<i;o++){var c=K({locationCoordinateX:0,locationCoordinateY:0,mapSize:n,creaturesStartingEnergy:r});c.randomizeLocation(),c.nn.randomize(),a.push(c)}return a}(Object(P.a)({creatures:$},e)),Z(Object(P.a)({creatures:$,plants:_},e))},ae=function(){r.clearRect(0,0,r.canvas.width,r.canvas.height);for(var e=_.length,a=0;a<e;a++)_[a].draw(r);for(var t=$.length,n=0;n<t;n++)$[n].draw(r)},te=function(e){var a=e.context,t=Object(f.a)(e,["context"]);(r=a).width=t.mapSize,r.height=t.mapSize,clearInterval(n),$=function(e){var a=e.creatures,t=e.creaturesInitCount,n=e.mapSize,r=e.creaturesStartingEnergy,i=Object(f.a)(e,["creatures","creaturesInitCount","mapSize","creaturesStartingEnergy"]);a=new Array(t);for(var o=0;o<t;o++)a[o]=K(Object(P.a)({locationCoordinateX:D(0,n),locationCoordinateY:D(0,n),mapSize:n,creaturesStartingEnergy:r},i)),a[o].nn.randomize(),a[o].energy=r;return a}(Object(P.a)({},t)),_=Z(Object(P.a)({creatures:$,plants:_},t)),n=setInterval((function(){return ee(t)}),t.speed)},ne=Object(g.a)((function(e){return{wrapper:{width:"100%"},form:{width:"25%"},canvas:{width:"70%"}}})),re=function(){var e=ne(),a=Object(i.useState)(null),t=Object(l.a)(a,2),r=t[0],c=t[1],u=Object(i.useState)(!1),d=Object(l.a)(u,2),m=d[0],g=d[1],f=Object(i.useState)(E),h=Object(l.a)(f,2),v=h[0],p=h[1],b=Object(i.useState)(S),y=Object(l.a)(b,2),I=y[0],A=y[1],N=Object(i.useState)(M),B=Object(l.a)(N,2),R=B[0],T=B[1],L=Object(i.useState)(j),q=Object(l.a)(L,2),J=q[0],P=q[1],W=Object(i.useState)(O),G=Object(l.a)(W,2),D=G[0],H=G[1],K=Object(i.useState)(z),Q=Object(l.a)(K,2),U=Q[0],V=Q[1],Z=Object(i.useState)(X),$=Object(l.a)(Z,2),_=$[0],ee=$[1],ae=Object(i.useState)(F),re=Object(l.a)(ae,2),ie=re[0],oe=re[1],ce=[{id:"creaturesInitCount",label:"poczatkowa liczba stworzen",value:v,onChange:function(e){var a=e.target;return p(a.value)}},{id:"creaturesMinCount",label:"minimalna liczba stworzen",value:I,onChange:function(e){var a=e.target;return A(a.value)}},{id:"creaturesStartingEnergy",label:"poczatkowa energia stworzen",value:J,onChange:function(e){var a=e.target;return P(a.value)}},{id:"creaturesLifespan",label:"dlugosc zycia stworzen",value:R,onChange:function(e){var a=e.target;return T(a.value)}}],ue=[{id:"worldMaxEnergy",label:"energia swiata",value:D,onChange:function(e){var a=e.target;return H(a.value)}},{id:"plantsEnergy",label:"energia nowej rosliny",value:U,onChange:function(e){var a=e.target;return V(a.value)}}],le=[{id:"mapSize",min:C,max:Y,label:"rozmiar planszy",value:_,onChange:function(e,a){return ee(a)}},{id:"speed",min:k,max:x,label:"predkosc",value:ie,onChange:function(e,a){return oe(a)}}];return Object(i.useEffect)((function(){c(document.getElementById("canvas").getContext("2d"))}),[]),o.a.createElement(s.a,{container:!0,className:e.wrapper},o.a.createElement(s.a,{item:!0,className:e.form},o.a.createElement(w,{creatureFields:ce,rangeFields:le,energyFields:ue,started:m,handleStart:function(){g(!0),te({creaturesInitCount:v,creaturesMinCount:I,creaturesLifespan:R,creaturesStartingEnergy:J,worldMaxEnergy:D,plantsEnergy:U,mapSize:_,speed:ie,context:r})},handleStop:function(){clearInterval(n)},handleReset:function(e){g(!1),function(e){e.location.reload(),clearInterval(n)}(e)}})),o.a.createElement(s.a,{item:!0,className:e.canvas},o.a.createElement("canvas",{id:"canvas",width:"600",height:"600"})))},ie=t(45),oe=t(10);var ce=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(ie.a,null,o.a.createElement(oe.a,{exact:!0,path:"/life-simulation"},o.a.createElement(re,null))))};u.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ce,null)),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.530fb64b.chunk.js.map